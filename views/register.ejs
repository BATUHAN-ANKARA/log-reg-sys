<!DOCTYPE html>
<html lang="en">
   <head>
      <!-- basic -->
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <!-- mobile metas -->
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta name="viewport" content="initial-scale=1, maximum-scale=1">
      <!-- site metas -->
      <title>lenslight</title>
      <meta name="keywords" content="">
      <meta name="description" content="">
      <meta name="author" content="">
      <!-- bootstrap css -->
      <link rel="stylesheet" href="css/bootstrap.min.css">
      <!-- style css -->
      <link rel="stylesheet" href="css/style.css">
      <!-- Responsive-->
      <link rel="stylesheet" href="css/responsive.css">
      <!-- fevicon -->
      <link rel="icon" href="images/fevicon.png" type="image/gif" />
      <!-- Tweaks for older IEs-->
      <link rel="stylesheet" href="css/owl.carousel.min.css">
      <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">
       <link rel="stylesheet" href="https://rawgit.com/LeshikJanz/libraries/master/Bootstrap/baguetteBox.min.css">
      <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script><![endif]-->
   </head>
   <!-- body -->
   <body class="main-layout inner_page">
      <!-- loader  -->
      <div class="loader_bg">
         <div class="loader"><img src="images/loading.gif" alt="#"/></div>
      </div>
      <!-- end loader -->
     
         <!-- header -->
         <header class="header-area">
            <div class="container-fluid">
               <div class="row ">
                 
                  <div class=" col-md-2 col-sm-3">
                     <div class="logo">
                        <a href="http://localhost:3000">sub<br><span>sys</span></a>
                     </div>
                  </div>
                  <div class="col-md-8 col-sm-9">
                     <div class="navbar-area">
                        <nav class="site-navbar">
                           <ul>
                              <li><a class="active" href="http://localhost:3000/register">Register</a></li>
                              <li><a href="http://localhost:3000/login">Login</a></li>
                           </ul>
                           <button class="nav-toggler">
                           <span></span>
                           </button>
                        </nav>
                     </div>
                  </div>
                  <div class=" col-md-2 di_none">
                    <ul class="email text_align_right">
                    <li><a href="Javascript:void(0)"><i class="fa fa-search" aria-hidden="true"></i></a></li>
                    </ul>
                  </div>
               </div>
            </div>
         </header>
         <!-- end header inner -->
      <!-- contact -->
        <div class="contact">
          <div class="container">
            <div class="row">
              <div class="col-md-12 ">
                <div class="titlepage text_align_center">
                  <span>06</span>
                  <h2>Requste A Call Back</h2>
                </div>
              </div>
              <div class="col-md-8 offset-md-2">
                <form id="request" class="main_form" action="users/register" method="post">
                  <div class="row">
                    <div class="col-md-12">
                      <input class="form_control" placeholder="username" type="text" name="username"> 
                    </div>
                    <div class="col-md-12">
                     <div style="display: none;" class="alert alert-danger" id="username"></div>
                    </div>
                    <div class="col-md-12">
                     <input class="form_control" placeholder="email" type="email" name="email"> 
                   </div>
                   <div class="col-md-12">
                     <div style="display: none;" class="alert alert-danger" id="email"></div>
                  </div>
                   <div class="col-md-12">
                     <input class="form_control" placeholder="password" type="password" name="password"> 
                   </div>
                   <div class="col-md-12">
                     <div style="display: none;" class="alert alert-danger" id="password"></div>
                  </div>
                    <div class="col-md-12">
                      <div class="group_form">
                        <button class="send_btn" type="submit">REGISTER</button>
                      </div>
                    </div>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>

        <!-- form validation -->
        <script>
         const form = document.querySelector('form')
         const emailError = document.querySelector('#email')
         const passwordError = document.querySelector('#password')
         const usernameError = document.querySelector('#username')
         form.addEventListener("submit", async (e) => {
            e.preventDefault();
            emailError.textContent = "";
            passwordError.textContent = "";
            usernameError.textContent = "";
            emailError.style.display = "none"
            passwordError.style.display = "none"
            usernameError.style.display = "none"
            const email = form.email.value
            const password = form.password.value
            const username = form.username.value
            try {
               const res = await fetch('users/register', {
                  method: "POST",
                  body: JSON.stringify({ email, password, username }),
                  headers: { "Content-Type": "application/json" }
               })
               const data = await res.json();
               if (data) {
                  if (data.email) {
                     emailError.textContent = data.email
                     emailError.style.display = "block"
                  }
                  if (data.password) {
                     passwordError.textContent = data.password
                     passwordError.style.display = "block"
                  }
                  if (data.username) {
                     usernameError.textContent = data.username
                     usernameError.style.display = "block"
                  }
               }
               if (data.user) {
                  location.assign("/login")
                  alert("Kayıt Başarıyla Oluşturuldu Giriş Yapabilirsiniz")
               }
            } catch (err) {
               console.log("ERR::", err)
            }
         })
      </script>

      <!-- end contact -->
      <!-- end footer -->
      <footer>
         <div class="footer">
            <div class="container">
               <div class="row">
                        <div class="col-md-12">
                              <ul class="menu_footer">
                                 <li><a class="active" href="http://localhost:3000/register">Register</a></li>
                                 <li><a href="http://localhost:3000/login">Login</a></li>
                              </ul>
                        </div>
                        <div class="col-md-12">
                          <ul class="top_infomation">
                            <li><a href="javascript:void(0)"><i><img src="images/loc.png" alt="#"/></i></a></li>
                            <li><a href="javascript:void(0)"><i><img src="images/call.png" alt="#"/></i></a></li>      
                            <li><a href="javascript:void(0)"><i><img src="images/mail.png" alt="#"/></i></a></li>   
                              </ul>
                        </div>
               </div>
            </div>
            <div class="copyright">
               <div class="container">
                  <div class="row d_flex">
                     <div class="col-md-8">
                        <p>© 2022 All Rights Reserved. Design by  <a href="https://html.design/"> Free html Templates</a></p>
                     </div>
                     <div class="col-md-4">
                       <ul class="social_icon_bottom ">
                          <li><a href="Javascript:void(0)"><i class="fa fa-facebook" aria-hidden="true"></i></a></li>
                          <li><a href="Javascript:void(0)"><i class="fa fa-twitter" aria-hidden="true"></i></a></li>
                          <li><a href="Javascript:void(0)"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li>
                       </ul>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </footer>
      <!-- end footer -->
      <!-- Javascript files-->
      <script src="js/jquery.min.js"></script>
      <script src="js/bootstrap.bundle.min.js"></script>
      <script src="js/jquery-3.0.0.min.js"></script>
      <script src="js/owl.carousel.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/baguettebox.js/1.8.1/baguetteBox.min.js"></script>
      <script src="js/custom.js"></script>
        <script type="text/javascript">
         baguetteBox.run('.tz-gallery');
      </script>
   </body>
</html>